As there is a lot of dependencies on host machine to cross build eIQ components, to avoid possible build
issues in unknown invironment, please ensure build it in docker container generated by Flexbuild as below:
```
$ cd flexbuild
$ source setup.env
$ flex-builder docker
[root@fbubuntu flexbuild]$ source setup.env
[root@fbubuntu flexbuild]$ flex-builder -h
```


## Cross build eIQ components for target arm64 on x86 host machine
```
Usage: flex-builder -c <component> [ -a <arch> ]
$ flex-builder -c eiq          # build all eIQ components (include armnn, tensorflow, tflite, opencv, onnx, etc)
$ flex-builder -c armnn        # build armnn
$ flex-builder -c tensorflow   # build tensorflow
$ flex-builder -c tflite       # build tflite
$ flex-builder -c opencv       # build opencv
$ flex-builder -c caffe        # build caffe
$ flex-builder -c onnx         # build onnx
$ flex-builder -c onnxruntime  # build onnxruntime
```


## Build full LSDK with eIQ components for target arm64 on x86 host machine
```
$ flex-builder -i clean-eiq
$ flex-builder -i mkrfs
$ flex-builder -c eiq
$ flex-builder -i mkbootpartition
$ flex-builder -i merge-component -B eiq
$ flex-builder -i install-eiq
$ flex-builder -i packrfs
```


## Deploy eIQ components to target board
To deploy full LSDK distro with eIQ images to target storage device on host machine for the first time:
```
$ flex-installer -r rootfs_lsdk2004_ubuntu_main_arm64.tgz -b bootpartition_LS_arm64_lts_5.4.tgz -d /dev/sdx
```


## To deploy the separate increment of specific eIQ component to the running LSDK distro on target board
- Generate the increment components_LS_arm64_ubuntu_eIQ.tgz
```
$ flex-builder -i clean-apps -B eiq
$ flex-builder -c <eiq_component>
$ flex-builder -i packapps -B eiq
```
- Connect the remote arm64 rootfs running on target board to local host and add increment eIQ component to target board:

```
$ flex-builder connect <target_IP>
$ flex-builder push eiq <target_IP>
$ flex-builder disconnect <target_IP>

```
- In other way, you can download and install components_LS_arm64_ubuntu_eIQ.tgz to target rootfs as below:

```
$ tar xfmv components_LS_arm64_ubuntu_eIQ.tgz -C /

```


## To customize Linux kernel for specific eIQ feature
```
$ flex-builder -c linux:custom -a arm64   # customize .config for kernel in interactive menu
$ flex-builder -c linux -a arm64          # build kernel with the customized .config
```


## How to add new eIQ component to LSDK
```
- Set CONFIG_EIQ_<component>=y, <component>_repo_url and <component>_repo_tag in configs/build_lsdk_xx.cfg
- Add make target in packages/apps/eiq/eiq.mk and build the new component by command flex-builder -c <component>

Optionally, you can modify the default repository tag/branch in configs/build_lsdk_xx.cfg on demand
e.g. modify variable tensorflow_repo_tag, opencv_repo_branch, etc
```
